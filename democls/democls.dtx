% \iffalse meta-comment
%<*internal>
\iffalse
%</internal>
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% README.md %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%<*readme>
# democls --- model dtx file

## Description
`democls.dtx` is based on [Joseph Wright's model `dtx`
file](http://www.texdev.net/2009/10/06/a-model-dtx-file/) with some
modifications made to suit my tastes. In particular, I find it helpful to
include detailed installation instructions by default, to use the `gitinfo2`
package, and to generally package things with GitHub distribution in
mind. Being class-targeted, this file differs more significantly from Wright's
original than `demopkg.dtx`.

Class usage details should be covered by `democls.pdf`.

## Installation
Run

```
$ pdflatex democls.dtx
```

to generate the `.ins`, `.cls`, `.pdf`, and `example.tex` files. Because of the
difficulty usually involved in providing examples of class macros and
environments within the class documentation, a separate file, `example.tex` is
needed, and `pdflatex` should be called on it if you wish to see how it
looks.

In order to properly generate the documentation's change history and index, run

```
$ makeindex -s gind.ist democls
$ makeindex -s gglo.ist -o democls.gls democls.glo
$ pdflatex democls.dtx
$ pdflatex democls.dtx
```

(You TeX environment may take care of this for you. I have vague recollections
of TeXShop not requiring me to manually run `makeindex`, but using Emacs AUCTeX
seems to require manual `makeindex`ing whether I run `C-c C-c latexmk` or `C-c
C-c LaTeX`.)

Finally, to use the generated `.cls` file, move it to the appropriate location
for your TeX distribution. Perhaps the easiest way to do this is by running

```
$ mv democls.cls $(kpsewhich -var-value=TEXMFHOME)/tex/latex
```

although if you're looking to make the file available to all users on a Unix
device, you're probably better off setting
`/usr/local/texlive/texmf-local/tex/latex` as the target directory (and then
running

```
# texhash
```

To ensure that installation has succeeded, run

```
$ kpsewhich democls.cls
```

and if the output is a path to the file, you're golden.
%</readme>
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LICENSE.md %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%<*license>
## democls.dtx
Copyright 2015 M. Y. Name

This work may be distributed and/or modified under the conditions of the LaTeX
Project Public License, either version 1.3 of this license or (at your option)
any later version.

The latest version of this license is in http://www.latex-project.org/lppl.txt
and version 1.3 or later is part of all distributions of LaTeX version
2005/12/01 or later.

This work has the LPPL maintenance status `maintained'.

The Current Maintainer of this work is M. Y. Name.

This work consists of the files
* `democls.dtx`
and the derived files
* `democls.ins`,
* `democls.cls`,
* `democls.pdf`, and
* `example.tex`.
%</license>
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% example.tex %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%<*example>
\documentclass{democls}
\begin{document}
\examplemacro[Hello]{world!}
\end{document}
%</example>
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%<*internal>
\fi
\def\nameofplainTeX{plain}
\ifx\fmtname\nameofplainTeX\else
  \expandafter\begingroup
\fi
%</internal>
%<*install>
\input docstrip.tex
\keepsilent
\askforoverwritefalse
\preamble
----------------------------------------------------------------
democls --- brief description
email: you+obfuscation@your.domain
GitHub: https://github.com/YourGitHubProfile
Released under the LaTeX Project Public License v1.3c or later
See http://www.latex-project.org/lppl.txt
----------------------------------------------------------------

\endpreamble
\postamble

Copyright (C) 2009 by You <you+obfuscation@your.domain>

This work may be distributed and/or modified under the conditions of the LaTeX
Project Public License (LPPL), either version 1.3c of this license or (at your
option) any later version. The latest version of this license is in the file:

http://www.latex-project.org/lppl.txt

This work is "maintained" (as per LPPL maintenance status) by
You.

This work consists of the file
  democls.dtx
and the derived files
  democls.ins,
  democls.cls,
  democls.pdf, and
  example.tex.

\endpostamble
\usedir{tex/latex/democls}
\generate{
  \file{\jobname.cls}{\from{\jobname.dtx}{class}}
}
\usedir{tex/latex/democls}
\generate{
  \file{example.tex}{\from{\jobname.dtx}{example}}
}
%</install>
%<install>\endbatchfile
%<*internal>
\usedir{source/latex/democls}
\generate{
  \file{\jobname.ins}{\from{\jobname.dtx}{install}}
}
\nopreamble\nopostamble
\usedir{doc/latex/democls}
\generate{
  \file{README.md}{\from{\jobname.dtx}{readme}}
}
\generate{
  \file{LICENSE.md}{\from{\jobname.dtx}{license}}
}
\ifx\fmtname\nameofplainTeX
  \expandafter\endbatchfile
\else
  \expandafter\endgroup
\fi
%</internal>
%\def\fileversion{v1.0} % \GetFileInfo doesn't work for classes(?)
%\def\filedate{2015/07/10}
%<*class>
\def\fileversion{v1.0}
\def\filedate{2015/07/10}
\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{democls}[\filedate\space\fileversion\space description text]
%</class>
%<*driver>
\documentclass{ltxdoc}
\usepackage[T1]{fontenc} % you should always use this, even with English
                         % see http://tex.stackexchange.com/a/677/51283
\usepackage{lmodern}
\usepackage[numbered]{hypdoc}
\usepackage{gitinfo2}
\EnableCrossrefs
\CodelineIndex
\RecordChanges
\begin{document}
  \DocInput{\jobname.dtx}
\end{document}
%</driver>
% \fi
%
%\title{^^A
%  \textsf{democls} --- description text\thanks{^^A
%    This file describes version \fileversion, last revised \filedate\space ^^A
%    (\texttt{git} commit \texttt{\gitAbbrevHash}).
%  }^^A
%}
%\author{^^A
%  You\thanks{email: you+obfuscation@your.domain}^^A
%}
%\date{Released \filedate}
%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%\DoNotIndex{\LoadClass}
%\DoNotIndex{\newcommand}
%\DoNotIndex{\textbf}
%\DoNotIndex{\textit}
%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%\maketitle
%
%\changes{v1.0}{2015/07/10}{initial release}
%
%\begin{abstract}
%  If you want more information, read this.
%\end{abstract}
%
%\section{Documentation}
%
%\DescribeMacro{\examplemacro}
% Some text about an example macro called \cs{examplemacro}, which
% might have an optional argument \oarg{arg1} and mandatory one
% \marg{arg2}.
%
%\StopEventually{^^A
%  \PrintChanges
%  \PrintIndex
%}
%
%\section{Class Definitions}
%
%    \begin{macrocode}
%<*class>
%    \end{macrocode}
%
%    \begin{macrocode}
\LoadClass{article}
%    \end{macrocode}
%    
%\begin{macro}{\examplemacro}
%\changes{v1.0}{2015/07/10}{Some change from the previous version}
%    \begin{macrocode}
\newcommand{\examplemacro}[2][]{%
  \textit{#1} --- \textbf{#2}
}
%    \end{macrocode}
%\end{macro} 
%
%    \begin{macrocode}
%</class>
%    \end{macrocode}
%\Finale
